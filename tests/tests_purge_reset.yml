# Test to ensure the logging role successfully runs with
# logging_purge_confs and logging_reset_confs set to true.
#
- name: Ensure that the role runs with default parameters
  hosts: all

  tasks:
    - name: default run with purge and reset
      vars:
        logging_purge_confs: true
        logging_reset_confs: true
      include_role:
        name: linux-system-roles.logging

    - name: Ensure installed packages
      vars:
        __expected:
          - rsyslog
          - ca-certificates
      include_tasks: tasks/check_packages.yml

    - name: Ensure config file size and counts
      vars:
        __conf_count: 0
        __conf_size: more
        __check_systemctl_status: true
      include_tasks: tasks/check_daemon_config_files.yml
